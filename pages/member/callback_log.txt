2025-04-13 12:47:11 - Callback received:
POST data:
Array
(
    [refno] => TP2504134329734824
    [status] => 1
    [reason] => Payment Approved
    [billcode] => 20p4wd9v
    [order_id] => ORD67fb960d75ef7
    [amount] => 40.00
    [status_id] => 1
    [msg] => ok
    [transaction_id] => TP2504134329734824
    [fpx_transaction_id] => 2504130628143594
    [hash] => 599661287cf50e2cbf6fa50507cd8e20
    [transaction_time] => 2025-04-13 06:28:14
)

✅ Updated existing payment record: Order ID ORD67fb960d75ef7, Status: Completed
✅ Order status updated: Order ID ORD67fb960d75ef7, Status: processing
2025-04-23 20:27:09 - Callback received:
POST data:
Array
(
    [refno] => TP2504242744045573
    [status] => 1
    [reason] => Payment Approved
    [billcode] => 3i0i0e6u
    [order_id] => ORD680930e513d0c
    [amount] => 3694.80
    [status_id] => 1
    [msg] => ok
    [transaction_id] => TP2504242744045573
    [fpx_transaction_id] => 2504240208057839
    [hash] => e0f93e4d30a6a6457d329445db576357
    [transaction_time] => 2025-04-24 02:08:05
)

✅ Updated existing payment record: Order ID ORD680930e513d0c, Status: Completed
✅ Order status updated: Order ID ORD680930e513d0c, Status: processing
❌ Database error: Unknown column 'quantity' in 'field list'
2025-04-23 20:32:08 - Callback received:
POST data:
Array
(
    [refno] => TP2504241836039041
    [status] => 1
    [reason] => Payment Approved
    [billcode] => k6v4ommk
    [order_id] => ORD68093212d182d
    [amount] => 3694.80
    [status_id] => 1
    [msg] => ok
    [transaction_id] => TP2504241836039041
    [fpx_transaction_id] => 2504240213047764
    [hash] => 289ef02e5185c1bc53d92c5d70dcf9bf
    [transaction_time] => 2025-04-24 02:13:04
)

✅ Updated existing payment record: Order ID ORD68093212d182d, Status: Completed
✅ Order status updated: Order ID ORD68093212d182d, Status: processing
✅ Reduced stock for Product ID 1, Quantity: 1
✅ Reduced stock for Product ID 2, Quantity: 1
2025-04-26 07:25:13 - Callback received:
POST data:
Array
(
    [refno] => TP2504264944846355
    [status] => 1
    [reason] => Payment Approved
    [billcode] => ozr3rt4w
    [order_id] => ORD680c6e2706f50
    [amount] => 2377.50
    [status_id] => 1
    [msg] => ok
    [transaction_id] => TP2504264944846355
    [fpx_transaction_id] => 2504260106082576
    [hash] => 43a182b88673df822c0d9cef709ed039
    [transaction_time] => 2025-04-26 01:06:08
)

✅ Updated existing payment record: Order ID ORD680c6e2706f50, Status: Completed
✅ Order status updated: Order ID ORD680c6e2706f50, Status: processing
✅ Reduced stock for Product ID 2, Quantity: 2
✅ Reduced stock for Product ID 3, Quantity: 1
2025-04-26 07:26:29 - Callback received:
POST data:
Array
(
    [refno] => TP2504261154997511
    [status] => 3
    [reason] => Payment Unsuccessful
    [billcode] => ot97zgnv
    [order_id] => ORD680c6e7654dbd
    [amount] => 1968.00
    [status_id] => 3
    [msg] => ok
    [transaction_id] => TP2504261154997511
    [fpx_transaction_id] => 2504260107264208
    [hash] => cdefc69038a06ed8b2767e8030a6dae4
    [transaction_time] => 2025-04-26 01:07:26
)

✅ Updated existing payment record: Order ID ORD680c6e7654dbd, Status: Failed
⚠️ No changes made to order status for Order ID: ORD680c6e7654dbd
✅ Reduced stock for Product ID 2, Quantity: 1
2025-04-26 08:01:38 - Callback received:
POST data:
Array
(
    [refno] => TP2504262828684733
    [status] => 1
    [reason] => Payment Approved
    [billcode] => 0vzhcgjl
    [order_id] => ORD680c76ab5865f
    [amount] => 1968.00
    [status_id] => 1
    [msg] => ok
    [transaction_id] => TP2504262828684733
    [fpx_transaction_id] => 2504260142311173
    [hash] => 085c557f0b67f9ddb529ba4a45b6ae9b
    [transaction_time] => 2025-04-26 01:42:31
)

✅ Updated existing payment record: Order ID ORD680c76ab5865f, Status: Completed
✅ Order status updated: Order ID ORD680c76ab5865f, Status: processing
✅ Reduced stock for Product ID 2, Quantity: 2
2025-04-26 09:46:35 - Callback received:
POST data:
Array
(
    [refno] => TP2504260184483054
    [status] => 1
    [reason] => Payment Approved
    [billcode] => pqly9miy
    [order_id] => ORD680c8f468efdc
    [amount] => 1968.00
    [status_id] => 1
    [msg] => ok
    [transaction_id] => TP2504260184483054
    [fpx_transaction_id] => 2504260327272576
    [hash] => d8ec5148316db5d9bc08a7e6324a0f9b
    [transaction_time] => 2025-04-26 03:27:27
)

Error: Order ID not found in orders table
2025-04-26 09:47:28 - Callback received:
POST data:
Array
(
)

Error: Missing required fields
2025-04-26 09:47:48 - Callback received:
POST data:
Array
(
)

Error: Missing required fields
2025-04-26 09:49:32 - Callback received:
POST data:
Array
(
    [refno] => TP2504262711355841
    [status] => 1
    [reason] => Payment Approved
    [billcode] => 2yum5zux
    [order_id] => ORD680c8fec31bde
    [amount] => 435.40
    [status_id] => 1
    [msg] => ok
    [transaction_id] => TP2504262711355841
    [fpx_transaction_id] => 2504260330254012
    [hash] => 2b403649cf026bb9bef4d5622b6fda26
    [transaction_time] => 2025-04-26 03:30:25
)

Error: Order ID not found in orders table
2025-04-26 16:05:37 - Callback received:
POST data:
Array
(
    [refno] => TP2504260314877205
    [status] => 1
    [reason] => Payment Approved
    [billcode] => 96nd4yf4
    [order_id] => ORD680c93be69ffc
    [amount] => 435.40
    [status_id] => 1
    [msg] => ok
    [transaction_id] => TP2504260314877205
    [fpx_transaction_id] => 2504260346329527
    [hash] => 462655393efb431ac6bf0bc10780f0f2
    [transaction_time] => 2025-04-26 03:46:32
)

Error: Order ID not found in orders table
2025-04-26 16:58:37 - Callback received:
POST data:
Array
(
    [refno] => TP2504264375001017
    [status] => 1
    [reason] => Payment Approved
    [billcode] => ancnhnvd
    [order_id] => ORD680ca0211479b
    [amount] => 2377.50
    [status_id] => 1
    [msg] => ok
    [transaction_id] => TP2504264375001017
    [fpx_transaction_id] => 2504260439299766
    [hash] => fe78de9cbbdedb75b77779441d90705f
    [transaction_time] => 2025-04-26 04:39:29
)

✅ Updated existing payment record: Order ID ORD680ca0211479b, Status: Completed
✅ Order status updated: Order ID ORD680ca0211479b, Status: processing
✅ Reduced stock for Product ID 2, Quantity: 2
✅ Reduced stock for Product ID 3, Quantity: 1
2025-04-26 17:01:19 - Callback received:
POST data:
Array
(
    [refno] => TP2504261891884513
    [status] => 3
    [reason] => Payment Unsuccessful
    [billcode] => 8o3oyae4
    [order_id] => ORD680ca0ccb28c6
    [amount] => 1968.00
    [status_id] => 3
    [msg] => ok
    [transaction_id] => TP2504261891884513
    [fpx_transaction_id] => 2504260442154648
    [hash] => bede638bcb6e4d399044e6f2322c7925
    [transaction_time] => 2025-04-26 04:42:15
)

✅ Updated existing payment record: Order ID ORD680ca0ccb28c6, Status: Failed
✅ Order status updated: Order ID ORD680ca0ccb28c6, Status: cancelled
✅ Reduced stock for Product ID 2, Quantity: 1
2025-04-26 17:06:28 - Callback received:
POST data:
Array
(
    [refno] => TP2504261315802025
    [status] => 3
    [reason] => Payment Unsuccessful
    [billcode] => 80spu9md
    [order_id] => ORD680ca203ccc1f
    [amount] => 1968.00
    [status_id] => 3
    [msg] => ok
    [transaction_id] => TP2504261315802025
    [fpx_transaction_id] => 2504260447255766
    [hash] => 27bce94bbeb682a566b62f54792c697b
    [transaction_time] => 2025-04-26 04:47:25
)

✅ Updated existing payment record: Order ID ORD680ca203ccc1f, Status: Failed
✅ Order status updated: Order ID ORD680ca203ccc1f, Status: cancelled
⚠️ Stock reduction skipped as order status is 'cancelled' for Order ID: ORD680ca203ccc1f
2025-04-26 17:07:19 - Callback received:
POST data:
Array
(
    [refno] => TP2504263300514075
    [status] => 1
    [reason] => Payment Approved
    [billcode] => ystxwl47
    [order_id] => ORD680ca233656b6
    [amount] => 1968.00
    [status_id] => 1
    [msg] => ok
    [transaction_id] => TP2504263300514075
    [fpx_transaction_id] => 2504260448139657
    [hash] => b0da67741dc938ea4fcf79e0498a5b5a
    [transaction_time] => 2025-04-26 04:48:13
)

✅ Updated existing payment record: Order ID ORD680ca233656b6, Status: Completed
✅ Order status updated: Order ID ORD680ca233656b6, Status: processing
✅ Reduced stock for Product ID 2, Quantity: 1
2025-04-28 01:28:26 - Callback received:
POST data:
Array
(
    [refno] => TP2504280656348481
    [status] => 1
    [reason] => Payment Approved
    [billcode] => 4vs5iaav
    [order_id] => ORD680e69279fb0f
    [amount] => 67.59
    [status_id] => 1
    [msg] => ok
    [transaction_id] => TP2504280656348481
    [fpx_transaction_id] => 2504280109186455
    [hash] => c02109ab19e0b3de4b335c9dd098e731
    [transaction_time] => 2025-04-28 01:09:18
)

✅ Updated existing payment record: Order ID ORD680e69279fb0f, Status: Completed
✅ Order status updated: Order ID ORD680e69279fb0f, Status: processing
✅ Reduced stock for Product ID 25, Quantity: 1
